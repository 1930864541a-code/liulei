<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>京湖优品导航系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c5aa0;
            --secondary-color: #4a7bc8;
            --accent-color: #00b894;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --light-bg: #f8fafc;
            --card-bg: #ffffff;
            --text-primary: #2d3748;
            --text-secondary: #4a5568;
            --border-color: #e2e8f0;
            --hover-color: #edf2f7;
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", "Segoe UI", Arial, sans-serif;
            background: linear-gradient(135deg, #f0f4ff 0%, #f8fafc 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            padding: 15px;
        }

        /* 主容器 */
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        /* 登录模态框 */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .login-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .login-container {
            background: white;
            border-radius: var(--radius);
            padding: 40px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 28px;
        }

        .login-header p {
            color: var(--text-secondary);
            font-size: 15px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(44, 90, 160, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }

        .login-btn:hover {
            background: var(--secondary-color);
            transform: translateY(-2px);
        }

        .login-error {
            color: var(--danger-color);
            font-size: 14px;
            margin-top: 10px;
            display: none;
        }

        .login-error.show {
            display: block;
        }

        /* 管理后台界面 */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 9999;
            overflow-y: auto;
            display: none;
        }

        .admin-panel.show {
            display: block;
        }

        .admin-header {
            background: linear-gradient(120deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-title h2 {
            font-size: 24px;
        }

        .admin-content {
            padding: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .admin-section {
            background: var(--light-bg);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* 表单和按钮样式 */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--secondary-color);
        }

        .btn-danger {
            background: var(--danger-color);
            color: white;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .btn-success {
            background: var(--accent-color);
            color: white;
        }

        .btn-success:hover {
            background: #00a085;
        }

        .btn-warning {
            background: var(--warning-color);
            color: white;
        }

        .btn-warning:hover {
            background: #e67e22;
        }

        /* 表单网格 */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        /* 项目列表 */
        .item-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }

        .list-item {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .list-item:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .item-info h4 {
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .item-info p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .item-actions {
            display: flex;
            gap: 10px;
        }

        /* 编辑表单容器 */
        .edit-form-container {
            display: none;
            margin-top: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .edit-form-container.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .edit-form-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* 原有导航系统样式保持不变 */
        header {
            background: linear-gradient(120deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 30px 20px;
            position: relative;
            text-align: center;
        }

        h1 {
            font-size: clamp(24px, 5vw, 32px);
            margin-bottom: 8px;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        h1 i {
            font-size: clamp(28px, 5vw, 36px);
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.85);
            font-size: clamp(14px, 3vw, 16px);
            margin-bottom: 25px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        /* 搜索框容器 - 修改部分 */
        .search-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
            padding: 0 15px;
            position: relative;
        }

        .search-container {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50px;
            padding: 5px;
            display: flex;
            max-width: 600px;
            width: 100%;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .search-container input {
            flex: 1;
            background: transparent;
            border: none;
            padding: 15px 20px;
            color: white;
            font-size: clamp(14px, 2vw, 16px);
            outline: none;
            min-width: 0;
        }

        .search-container input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        /* 新增：清空按钮样式 */
        .clear-search-btn {
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            padding: 0 10px;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: var(--transition);
        }

        .clear-search-btn:hover {
            color: white;
        }

        .clear-search-btn.show {
            display: flex;
        }

        .search-container button {
            background: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .search-container button:hover {
            background: var(--hover-color);
            transform: scale(1.05);
        }

        /* 修改：搜索结果下拉列表样式 */
        .search-results {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 600px;
            max-height: 400px;
            overflow-y: auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            margin-top: 10px;
            z-index: 1000;
            display: none;
        }

        .search-results.show {
            display: block;
        }

        .search-results-header {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .search-results-list {
            list-style: none;
            max-height: 350px;
            overflow-y: auto;
        }

        .search-result-item {
            padding: 15px 20px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .search-result-item:hover {
            background: var(--hover-color);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item i {
            color: var(--secondary-color);
            font-size: 16px;
            width: 24px;
        }

        .search-result-content {
            flex: 1;
        }

        .search-result-title {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-primary);
        }

        .search-result-desc {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .search-result-category {
            font-size: 12px;
            color: var(--accent-color);
            margin-top: 3px;
        }

        .search-result-empty {
            padding: 30px 20px;
            text-align: center;
            color: var(--text-secondary);
        }

        /* 搜索结果高亮 */
        .highlight {
            background-color: rgba(255, 235, 59, 0.3);
            border-radius: 3px;
            padding: 0 2px;
        }

        .main-content {
            padding: 30px 20px;
        }

        .top-links {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .top-link {
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 700;
            font-size: clamp(16px, 2.5vw, 18px);
            padding: 20px;
            background: var(--light-bg);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
            border: 2px solid transparent;
            flex: 1;
            min-width: 250px;
            max-width: 350px;
            justify-content: flex-start;
        }

        .top-link:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(44, 90, 160, 0.1);
        }

        .top-link i {
            font-size: 24px;
            color: var(--accent-color);
            flex-shrink: 0;
        }

        .top-link-content {
            flex: 1;
            min-width: 0;
        }

        .categories-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .category-group {
            background: var(--light-bg);
            border-radius: var(--radius);
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            transition: var(--transition);
        }

        .category-group:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .category-header i {
            font-size: 24px;
            color: var(--accent-color);
            width: 40px;
            text-align: center;
            flex-shrink: 0;
        }

        .category-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(clamp(250px, 100%, 300px), 1fr));
            gap: 15px;
        }

        .link-item {
            text-decoration: none;
            color: var(--text-primary);
            padding: 18px;
            background: white;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .link-item:hover {
            background: var(--hover-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border-color: var(--secondary-color);
        }

        .link-item i {
            color: var(--secondary-color);
            font-size: 18px;
            width: 30px;
            text-align: center;
            flex-shrink: 0;
        }

        .link-content {
            flex: 1;
            min-width: 0;
        }

        .link-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 16px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .link-desc {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        footer {
            background: var(--light-bg);
            padding: 20px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
            border-top: 1px solid var(--border-color);
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .page-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
            min-width: 200px;
        }

        .page-info i {
            color: var(--accent-color);
        }

        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            flex: 1;
            min-width: 200px;
        }

        .quick-action {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 15px;
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .quick-action:hover {
            background: var(--hover-color);
            border-color: var(--secondary-color);
        }

        /* 复制提示框 */
        .copy-toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 184, 148, 0.9);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            transform: translateX(-50%) translateY(-20px);
        }

        .copy-toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body {
                padding: 0px;
            }
            
            header {
                padding: 25px 15px;
            }
            
            .main-content {
                padding: 20px 15px;
            }
            
            .top-link {
                min-width: 100%;
                max-width: 100%;
                justify-content: flex-start;
            }
            
            .links-grid {
                grid-template-columns: 1fr;
            }
            
            .category-group {
                padding: 20px;
            }
            
            .category-header {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .category-header i {
                width: auto;
            }
            
            .category-title {
                font-size: 18px;
            }
            
            footer {
                flex-direction: column;
                text-align: center;
            }
            
            .page-info, .quick-actions {
                width: 100%;
            }
            
            /* 管理后台响应式 */
            .admin-content {
                padding: 20px 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .list-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .item-actions {
                align-self: flex-end;
                width: 100%;
                justify-content: flex-end;
            }
        }

        @media (max-width: 480px) {
            .search-container {
                flex-direction: column;
                background: transparent;
                border: none;
                backdrop-filter: none;
                max-width: 100%;
            }
            
            .search-container input {
                background: rgba(255, 255, 255, 0.15);
                border-radius: 25px;
                border: 1px solid rgba(255, 255, 255, 0.3);
                margin-bottom: 10px;
                text-align: center;
            }
            
            .clear-search-btn {
                position: absolute;
                right: 70px;
                top: 50%;
                transform: translateY(-50%);
            }
            
            .search-container button {
                width: 100%;
                border-radius: 25px;
                height: 45px;
            }
            
            .link-item {
                padding: 15px;
            }

            .copy-toast {
                width: 80%;
                text-align: center;
            }
            
            .login-container {
                padding: 30px 20px;
            }
            
            .search-results {
                width: 90%;
                left: 5%;
                transform: none;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-compass"></i> 京湖优品导航系统</h1>
            <div class="subtitle">快速访问公司内部系统与多维数据表格，提升工作效率</div>
            
            <div class="search-wrapper">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="搜索系统或表格名称..." autocomplete="off">
                    <!-- 新增：清空搜索按钮 -->
                    <button class="clear-search-btn" id="clearSearchBtn">
                        <i class="fas fa-times"></i>
                    </button>
                    <button id="searchButton">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <!-- 修改：搜索结果改为下拉列表 -->
                <div class="search-results" id="searchResults">
                    <div class="search-results-header">
                        <span>搜索结果</span>
                        <span id="resultCount">0 个结果</span>
                    </div>
                    <ul class="search-results-list" id="searchResultsList">
                        <!-- 搜索结果将在这里动态生成 -->
                    </ul>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <div class="top-links">
                <a href="https://oumai.app.gerpgo.com/amzv-web/stats/index" target="_blank" class="top-link" data-search="ERP 系统 企业资源计划">
                    <i class="fas fa-cogs"></i>
                    <div class="top-link-content">
                        <div>ERP 系统</div>
                        <div style="font-size: 14px; font-weight: normal; opacity: 0.8;">企业资源计划</div>
                    </div>
                </a>
                <a href="javascript:void(0);" id="emailCopyLink" class="top-link" data-search="企业邮箱 hr01@yaxintuo.com 点击复制邮箱地址">
                    <i class="fas fa-envelope"></i>
                    <div class="top-link-content">
                        <div>企业邮箱:hr01@yaxintuo.com</div>
                        <div style="font-size: 14px; font-weight: normal; opacity: 0.8;">点击复制邮箱地址</div>
                    </div>
                </a>
            </div>
            
            <div class="categories-container" id="categoriesContainer">
                <!-- 分类和链接将在这里动态生成 -->
            </div>
        </div>
        
        <footer>
            <div class="page-info">
                <i class="fas fa-info-circle"></i>
                <span id="totalCount">共 11 个系统/表格 • 最后更新: 2023年10月</span>
            </div>
            <div class="quick-actions">
                <div class="quick-action" id="refreshPage">
                    <i class="fas fa-redo"></i>
                    <span>刷新</span>
                </div>
                <div class="quick-action" id="viewAll">
                    <i class="fas fa-list"></i>
                    <span>查看全部</span>
                </div>
                <div class="quick-action" id="adminLoginBtn">
                    <i class="fas fa-cog"></i>
                    <span>管理后台</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- 登录模态框 -->
    <div class="login-modal" id="loginModal">
        <div class="login-container">
            <div class="login-header">
                <h2><i class="fas fa-lock"></i> 管理后台登录</h2>
                <p>请输入您的账号和密码以访问管理功能</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">账号</label>
                    <input type="text" id="username" class="form-control" placeholder="请输入账号" required>
                </div>
                
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" class="form-control" placeholder="请输入密码" required>
                </div>
                
                <div class="login-error" id="loginError">
                    <i class="fas fa-exclamation-circle"></i> 账号或密码错误，请重试
                </div>
                
                <button type="submit" class="login-btn">登录</button>
            </form>
            
            <div style="margin-top: 20px; text-align: center; font-size: 14px; color: var(--text-secondary);">
            </div>
        </div>
    </div>

    <!-- 管理后台界面 -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <div class="admin-title">
                <i class="fas fa-cog"></i>
                <h2>京湖优品导航系统 - 管理后台</h2>
            </div>
            <button class="btn btn-primary" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> 退出登录
            </button>
        </div>
        
        <div class="admin-content">
            <!-- 添加/编辑新链接 -->
            <div class="admin-section">
                <div class="section-title">
                    <i class="fas fa-plus-circle"></i> 
                    <span id="linkFormTitle">添加新导航链接</span>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="newLinkTitle">链接标题</label>
                        <input type="text" id="newLinkTitle" class="form-control" placeholder="例如：财务系统">
                    </div>
                    
                    <div class="form-group">
                        <label for="newLinkUrl">链接地址</label>
                        <input type="text" id="newLinkUrl" class="form-control" placeholder="https://example.com">
                    </div>
                    
                    <div class="form-group">
                        <label for="newLinkDesc">链接描述</label>
                        <input type="text" id="newLinkDesc" class="form-control" placeholder="简要描述链接功能">
                    </div>
                    
                    <div class="form-group">
                        <label for="newLinkIcon">图标类名</label>
                        <input type="text" id="newLinkIcon" class="form-control" placeholder="fas fa-chart-pie" value="fas fa-link">
                        <small style="display: block; margin-top: 5px; color: var(--text-secondary);">
                            使用FontAwesome图标类名，如：fas fa-home, fas fa-chart-bar
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="newLinkCategory">所属分类</label>
                        <select id="newLinkCategory" class="form-control">
                            <option value="运营相关">运营相关</option>
                            <option value="产品相关">产品相关</option>
                            <option value="人事相关">人事相关</option>
                        </select>
                    </div>
                </div>
                
                <!-- 隐藏字段，用于存储编辑状态的链接ID和分类ID -->
                <input type="hidden" id="editingLinkId" value="">
                <input type="hidden" id="editingCategoryId" value="">
                
                <div style="display: flex; gap: 15px;">
                    <button class="btn btn-success" id="saveLinkBtn">
                        <i class="fas fa-plus"></i> 添加链接
                    </button>
                    <button class="btn btn-warning" id="cancelEditBtn" style="display: none;">
                        <i class="fas fa-times"></i> 取消编辑
                    </button>
                </div>
            </div>
            
            <!-- 添加新分类 -->
            <div class="admin-section">
                <div class="section-title">
                    <i class="fas fa-folder-plus"></i> 添加新分类
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="newCategoryTitle">分类名称</label>
                        <input type="text" id="newCategoryTitle" class="form-control" placeholder="例如：财务相关">
                    </div>
                    
                    <div class="form-group">
                        <label for="newCategoryIcon">分类图标</label>
                        <input type="text" id="newCategoryIcon" class="form-control" placeholder="fas fa-money-bill-wave" value="fas fa-folder">
                    </div>
                </div>
                
                <button class="btn btn-success" id="addCategoryBtn">
                    <i class="fas fa-plus"></i> 添加分类
                </button>
            </div>
            
            <!-- 管理现有链接 -->
            <div class="admin-section">
                <div class="section-title">
                    <i class="fas fa-edit"></i> 管理现有链接
                </div>
                
                <div class="item-list" id="linksList">
                    <!-- 链接将在这里动态生成 -->
                </div>
            </div>
            
            <!-- 管理现有分类 -->
            <div class="admin-section">
                <div class="section-title">
                    <i class="fas fa-list-alt"></i> 管理现有分类
                </div>
                
                <div class="item-list" id="categoriesList">
                    <!-- 分类将在这里动态生成 -->
                </div>
            </div>
            
            <!-- 数据管理 -->
            <div class="admin-section">
                <div class="section-title">
                    <i class="fas fa-database"></i> 数据管理
                </div>
                
                <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                    <button class="btn btn-primary" id="saveDataBtn">
                        <i class="fas fa-save"></i> 保存更改
                    </button>
                    <button class="btn btn-danger" id="resetDataBtn">
                        <i class="fas fa-undo"></i> 恢复默认数据
                    </button>
                    <button class="btn" id="exportDataBtn" style="background: #6c5ce7; color: white;">
                        <i class="fas fa-download"></i> 导出数据
                    </button>
                </div>
                
                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                    <p style="margin-bottom: 10px; font-weight: 600;">数据状态：</p>
                    <p id="dataStatus">已保存至本地存储，刷新页面不会丢失数据。</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 复制提示框 -->
    <div class="copy-toast" id="copyToast">企业邮箱复制成功！</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 基础DOM元素
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const clearSearchBtn = document.getElementById('clearSearchBtn');
            const searchResults = document.getElementById('searchResults');
            const searchResultsList = document.getElementById('searchResultsList');
            const resultCount = document.getElementById('resultCount');
            const refreshButton = document.getElementById('refreshPage');
            const viewAllButton = document.getElementById('viewAll');
            const emailCopyLink = document.getElementById('emailCopyLink');
            const copyToast = document.getElementById('copyToast');
            const adminLoginBtn = document.getElementById('adminLoginBtn');
            const loginModal = document.getElementById('loginModal');
            const adminPanel = document.getElementById('adminPanel');
            const loginForm = document.getElementById('loginForm');
            const loginError = document.getElementById('loginError');
            const logoutBtn = document.getElementById('logoutBtn');
            const categoriesContainer = document.getElementById('categoriesContainer');
            const totalCount = document.getElementById('totalCount');
            
            // 管理后台相关元素
            const saveLinkBtn = document.getElementById('saveLinkBtn');
            const cancelEditBtn = document.getElementById('cancelEditBtn');
            const addCategoryBtn = document.getElementById('addCategoryBtn');
            const saveDataBtn = document.getElementById('saveDataBtn');
            const resetDataBtn = document.getElementById('resetDataBtn');
            const exportDataBtn = document.getElementById('exportDataBtn');
            const linksList = document.getElementById('linksList');
            const categoriesList = document.getElementById('categoriesList');
            const dataStatus = document.getElementById('dataStatus');
            
            // 表单元素
            const newLinkTitle = document.getElementById('newLinkTitle');
            const newLinkUrl = document.getElementById('newLinkUrl');
            const newLinkDesc = document.getElementById('newLinkDesc');
            const newLinkIcon = document.getElementById('newLinkIcon');
            const newLinkCategory = document.getElementById('newLinkCategory');
            const newCategoryTitle = document.getElementById('newCategoryTitle');
            const newCategoryIcon = document.getElementById('newCategoryIcon');
            const editingLinkId = document.getElementById('editingLinkId');
            const editingCategoryId = document.getElementById('editingCategoryId');
            const linkFormTitle = document.getElementById('linkFormTitle');
            
            // 默认数据
            const defaultNavData = {
                categories: [
                    {
                        id: 1,
                        title: "运营相关",
                        icon: "fas fa-chart-line",
                        links: [
                            { 
                                id: 1,
                                title: "运营总表", 
                                desc: "核心运营指标监控与分析", 
                                url: "https://tables.company.com/operations", 
                                icon: "fas fa-table" 
                            },
                            { 
                                id: 2,
                                title: "活动排期表", 
                                desc: "市场活动规划与执行跟踪", 
                                url: "https://tables.company.com/activities", 
                                icon: "fas fa-calendar-alt" 
                            },
                            { 
                                id: 3,
                                title: "数据日报", 
                                desc: "每日关键数据汇总与报告", 
                                url: "https://tables.company.com/daily-report", 
                                icon: "fas fa-chart-bar" 
                            }
                        ]
                    },
                    {
                        id: 2,
                        title: "产品相关",
                        icon: "fas fa-cube",
                        links: [
                            { 
                                id: 4,
                                title: "产品开发表", 
                                desc: "产品开发进度与任务管理", 
                                url: "https://jinghuyoupin.feishu.cn/wiki/TnPUwv2U5isQ1HkQUfTcu85BnOh?table=tbljgBz1lK3wEHTd", 
                                icon: "fas fa-lightbulb" 
                            },
                            { 
                                id: 5,
                                title: "新品开发需求信息表", 
                                desc: "可提交需要开发的新品信息", 
                                url: "https://jinghuyoupin.feishu.cn/share/base/form/shrcnT6VemfrTVMjtDlvCVuIq4c", 
                                icon: "fas fa-road" 
                            }
                        ]
                    },
                    {
                        id: 3,
                        title: "人事相关",
                        icon: "fas fa-users",
                        links: [
                            { 
                                id: 6,
                                title: "员工花名册", 
                                desc: "员工基本信息管理与查询", 
                                url: "https://tables.company.com/employee-directory", 
                                icon: "fas fa-address-book" 
                            },
                            { 
                                id: 7,
                                title: "入离职登记", 
                                desc: "员工入职离职流程管理", 
                                url: "https://tables.company.com/onboarding-offboarding", 
                                icon: "fas fa-door-open" 
                            },
                            { 
                                id: 8,
                                title: "绩效考核表", 
                                desc: "员工绩效评估与记录管理", 
                                url: "https://tables.company.com/performance", 
                                icon: "fas fa-medal" 
                            }
                        ]
                    }
                ]
            };
            
            // 当前导航数据
            let navData = loadNavData();
            
            // 存储所有可搜索的项目
            let allSearchItems = [];
            
            // 初始化导航界面
            function initNavigation() {
                renderCategories();
                updateTotalCount();
                buildSearchIndex();
            }
            
            // 渲染分类和链接
            function renderCategories() {
                categoriesContainer.innerHTML = '';
                
                navData.categories.forEach(category => {
                    const categoryGroup = document.createElement('div');
                    categoryGroup.className = 'category-group';
                    categoryGroup.dataset.categoryId = category.id;
                    
                    const categoryHeader = document.createElement('div');
                    categoryHeader.className = 'category-header';
                    
                    categoryHeader.innerHTML = `
                        <i class="${category.icon}"></i>
                        <div class="category-title">${category.title}</div>
                    `;
                    
                    const linksGrid = document.createElement('div');
                    linksGrid.className = 'links-grid';
                    
                    category.links.forEach(link => {
                        const linkItem = document.createElement('a');
                        linkItem.className = 'link-item';
                        linkItem.href = link.url;
                        linkItem.target = '_blank';
                        linkItem.dataset.search = `${link.title} ${link.desc} ${category.title}`;
                        
                        linkItem.innerHTML = `
                            <i class="${link.icon}"></i>
                            <div class="link-content">
                                <div class="link-title">${link.title}</div>
                                <div class="link-desc">${link.desc}</div>
                            </div>
                        `;
                        
                        linksGrid.appendChild(linkItem);
                    });
                    
                    categoryGroup.appendChild(categoryHeader);
                    categoryGroup.appendChild(linksGrid);
                    categoriesContainer.appendChild(categoryGroup);
                });
            }
            
            // 构建搜索索引
            function buildSearchIndex() {
                allSearchItems = [];
                
                // 添加顶部链接
                const topLinks = document.querySelectorAll('.top-link');
                topLinks.forEach(link => {
                    allSearchItems.push({
                        element: link,
                        title: link.querySelector('.top-link-content > div:first-child').textContent,
                        desc: link.querySelector('.top-link-content > div:last-child').textContent,
                        icon: link.querySelector('i').className,
                        type: 'top-link',
                        category: '顶部链接'
                    });
                });
                
                // 添加分类链接
                navData.categories.forEach(category => {
                    category.links.forEach(link => {
                        allSearchItems.push({
                            element: null, // 动态生成
                            title: link.title,
                            desc: link.desc,
                            url: link.url,
                            icon: link.icon,
                            type: 'link-item',
                            category: category.title
                        });
                    });
                });
            }
            
            // 更新总计数
            function updateTotalCount() {
                let totalLinks = 0;
                navData.categories.forEach(category => {
                    totalLinks += category.links.length;
                });
                
                // 加上顶部链接
                totalLinks += 2; // ERP系统和企业邮箱
                
                const now = new Date();
                const formattedDate = `${now.getFullYear()}年${now.getMonth()+1}月${now.getDate()}日`;
                
                totalCount.textContent = `共 ${totalLinks} 个系统/表格 • 最后更新: ${formattedDate}`;
            }
            
            // 加载导航数据
            function loadNavData() {
                const savedData = localStorage.getItem('jhyp_nav_data');
                if (savedData) {
                    try {
                        return JSON.parse(savedData);
                    } catch (e) {
                        console.error('解析保存的数据失败，使用默认数据', e);
                        return JSON.parse(JSON.stringify(defaultNavData));
                    }
                }
                return JSON.parse(JSON.stringify(defaultNavData));
            }
            
            // 保存导航数据
            function saveNavData() {
                localStorage.setItem('jhyp_nav_data', JSON.stringify(navData));
                showDataStatus('数据已成功保存到本地存储', 'success');
                initNavigation(); // 重新渲染导航界面
                renderAdminLists(); // 更新管理后台列表
            }
            
            // 显示数据状态消息
            function showDataStatus(message, type = 'info') {
                dataStatus.textContent = message;
                
                // 重置样式
                dataStatus.parentElement.style.background = '#f8f9fa';
                dataStatus.style.color = 'var(--text-primary)';
                
                if (type === 'success') {
                    dataStatus.parentElement.style.background = '#d4edda';
                    dataStatus.style.color = '#155724';
                } else if (type === 'error') {
                    dataStatus.parentElement.style.background = '#f8d7da';
                    dataStatus.style.color = '#721c24';
                }
            }
            
            // 复制邮箱地址功能
            function copyEmailAddress() {
                const email = 'hr01@yaxintuo.com';
                navigator.clipboard.writeText(email)
                    .then(() => {
                        copyToast.textContent = '企业邮箱复制成功！';
                        showCopyToast();
                    })
                    .catch(err => {
                        const textArea = document.createElement('textarea');
                        textArea.value = email;
                        document.body.appendChild(textArea);
                        textArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(textArea);
                        copyToast.textContent = '企业邮箱复制成功！';
                        showCopyToast();
                        console.error('复制失败:', err);
                    });
            }
            
            // 显示复制成功提示框
            function showCopyToast() {
                copyToast.classList.add('show');
                setTimeout(() => {
                    copyToast.classList.remove('show');
                }, 3000);
            }
            
            // 高亮文本函数
            function highlightText(text, searchTerm) {
                if (!searchTerm) return text;
                
                const regex = new RegExp(`(${searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
                return text.replace(regex, '<span class="highlight">$1</span>');
            }
            
            // 搜索功能
            function performSearch() {
                const searchTerm = searchInput.value.trim().toLowerCase();
                
                // 显示/隐藏清空按钮
                if (searchTerm.length > 0) {
                    clearSearchBtn.classList.add('show');
                } else {
                    clearSearchBtn.classList.remove('show');
                    searchResults.classList.remove('show');
                    return;
                }
                
                // 清空之前的搜索结果
                searchResultsList.innerHTML = '';
                
                if (searchTerm === '') {
                    searchResults.classList.remove('show');
                    return;
                }
                
                const matchedItems = [];
                
                // 搜索匹配
                allSearchItems.forEach(item => {
                    const title = item.title.toLowerCase();
                    const desc = item.desc.toLowerCase();
                    const category = item.category.toLowerCase();
                    
                    if (title.includes(searchTerm) || desc.includes(searchTerm) || category.includes(searchTerm)) {
                        matchedItems.push({
                            ...item,
                            score: (title === searchTerm ? 3 : 0) + 
                                   (title.includes(searchTerm) ? 2 : 0) + 
                                   (desc.includes(searchTerm) ? 1 : 0)
                        });
                    }
                });
                
                // 按匹配度排序
                matchedItems.sort((a, b) => b.score - a.score);
                
                // 更新结果计数
                resultCount.textContent = `${matchedItems.length} 个结果`;
                
                if (matchedItems.length > 0) {
                    // 生成搜索结果列表
                    matchedItems.forEach(item => {
                        const listItem = document.createElement('li');
                        listItem.className = 'search-result-item';
                        
                        // 高亮显示匹配的文本
                        const highlightedTitle = highlightText(item.title, searchTerm);
                        const highlightedDesc = highlightText(item.desc, searchTerm);
                        
                        listItem.innerHTML = `
                            <i class="${item.icon}"></i>
                            <div class="search-result-content">
                                <div class="search-result-title">${highlightedTitle}</div>
                                <div class="search-result-desc">${highlightedDesc}</div>
                                <div class="search-result-category">${item.category}</div>
                            </div>
                        `;
                        
                        // 添加点击事件
                        listItem.addEventListener('click', function() {
                            if (item.type === 'top-link' && item.element.id === 'emailCopyLink') {
                                copyEmailAddress();
                            } else if (item.type === 'top-link') {
                                item.element.click();
                            } else if (item.type === 'link-item') {
                                window.open(item.url, '_blank');
                            }
                            
                            // 关闭搜索结果
                            searchResults.classList.remove('show');
                            searchInput.value = '';
                            clearSearchBtn.classList.remove('show');
                        });
                        
                        searchResultsList.appendChild(listItem);
                    });
                    
                    searchResults.classList.add('show');
                } else {
                    // 没有搜索结果
                    searchResultsList.innerHTML = `
                        <div class="search-result-empty">
                            <i class="fas fa-search" style="font-size: 24px; margin-bottom: 10px; opacity: 0.5;"></i>
                            <p>未找到相关结果</p>
                            <p style="font-size: 12px; margin-top: 5px;">请尝试其他关键词</p>
                        </div>
                    `;
                    searchResults.classList.add('show');
                }
            }
            
            // 清空搜索功能
            function clearSearch() {
                searchInput.value = '';
                clearSearchBtn.classList.remove('show');
                searchResults.classList.remove('show');
            }
            
            // 刷新页面功能
            refreshButton.addEventListener('click', function() {
                refreshButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>刷新中...</span>';
                
                setTimeout(() => {
                    clearSearch();
                    refreshButton.innerHTML = '<i class="fas fa-redo"></i><span>刷新</span>';
                }, 800);
            });
            
            // 查看全部功能
            viewAllButton.addEventListener('click', function() {
                clearSearch();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // 管理后台功能
            
            // 打开登录模态框
            adminLoginBtn.addEventListener('click', function() {
                loginModal.classList.add('show');
                document.getElementById('username').focus();
            });
            
            // 登录功能
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                
                // 验证账号密码
                if (username === 'jhyp1815' && password === 'jhyp1815') {
                    // 登录成功
                    loginError.classList.remove('show');
                    loginModal.classList.remove('show');
                    
                    // 显示管理后台
                    adminPanel.classList.add('show');
                    document.body.style.overflow = 'hidden';
                    
                    // 渲染管理后台列表
                    renderAdminLists();
                    showDataStatus('欢迎使用管理后台，您可以在此添加、删除或修改导航内容。');
                    
                    // 清空登录表单
                    loginForm.reset();
                } else {
                    // 登录失败
                    loginError.classList.add('show');
                    document.getElementById('password').value = '';
                    document.getElementById('password').focus();
                }
            });
            
            // 退出登录
            logoutBtn.addEventListener('click', function() {
                adminPanel.classList.remove('show');
                document.body.style.overflow = 'auto';
            });
            
            // 关闭登录模态框（点击背景）
            loginModal.addEventListener('click', function(e) {
                if (e.target === loginModal) {
                    loginModal.classList.remove('show');
                    loginError.classList.remove('show');
                    loginForm.reset();
                }
            });
            
            // 点击页面其他地方关闭搜索结果
            document.addEventListener('click', function(e) {
                if (!searchResults.contains(e.target) && 
                    e.target !== searchInput && 
                    e.target !== searchButton && 
                    e.target !== clearSearchBtn && 
                    !clearSearchBtn.contains(e.target)) {
                    searchResults.classList.remove('show');
                }
            });
            
            // 保存/更新链接功能
            saveLinkBtn.addEventListener('click', function() {
                const title = newLinkTitle.value.trim();
                const url = newLinkUrl.value.trim();
                const desc = newLinkDesc.value.trim();
                const icon = newLinkIcon.value.trim();
                const categoryName = newLinkCategory.value;
                const linkId = editingLinkId.value ? parseInt(editingLinkId.value) : null;
                const categoryId = editingCategoryId.value ? parseInt(editingCategoryId.value) : null;
                
                if (!title || !url) {
                    alert('请填写链接标题和地址');
                    return;
                }
                
                // 查找分类
                const category = navData.categories.find(cat => cat.title === categoryName);
                if (!category) {
                    alert('指定的分类不存在');
                    return;
                }
                
                // 如果是编辑模式
                if (linkId && categoryId) {
                    // 查找要编辑的链接
                    const editCategory = navData.categories.find(cat => cat.id === categoryId);
                    if (!editCategory) {
                        alert('找不到要编辑的链接所属分类');
                        return;
                    }
                    
                    const linkIndex = editCategory.links.findIndex(link => link.id === linkId);
                    if (linkIndex === -1) {
                        alert('找不到要编辑的链接');
                        return;
                    }
                    
                    // 更新链接信息
                    editCategory.links[linkIndex] = {
                        id: linkId,
                        title,
                        desc: desc || '暂无描述',
                        url: url.includes('://') ? url : 'https://' + url,
                        icon: icon || 'fas fa-link'
                    };
                    
                    // 保存数据
                    saveNavData();
                    
                    // 退出编辑模式
                    cancelEdit();
                    
                    showDataStatus(`链接"${title}"已成功更新`, 'success');
                } else {
                    // 创建新链接
                    const newLink = {
                        id: Date.now(), // 使用时间戳作为ID
                        title,
                        desc: desc || '暂无描述',
                        url: url.includes('://') ? url : 'https://' + url,
                        icon: icon || 'fas fa-link'
                    };
                    
                    // 添加到分类
                    category.links.push(newLink);
                    
                    // 保存数据
                    saveNavData();
                    
                    // 清空表单
                    newLinkTitle.value = '';
                    newLinkUrl.value = '';
                    newLinkDesc.value = '';
                    newLinkIcon.value = 'fas fa-link';
                    
                    showDataStatus(`链接"${title}"已成功添加到"${categoryName}"分类`, 'success');
                }
            });
            
            // 取消编辑功能
            cancelEditBtn.addEventListener('click', function() {
                cancelEdit();
            });
            
            // 取消编辑
            function cancelEdit() {
                // 清空表单
                newLinkTitle.value = '';
                newLinkUrl.value = '';
                newLinkDesc.value = '';
                newLinkIcon.value = 'fas fa-link';
                editingLinkId.value = '';
                editingCategoryId.value = '';
                
                // 恢复按钮状态
                saveLinkBtn.innerHTML = '<i class="fas fa-plus"></i> 添加链接';
                cancelEditBtn.style.display = 'none';
                linkFormTitle.textContent = '添加新导航链接';
            }
            
            // 编辑链接功能
            function editLink(linkId, categoryId) {
                // 查找分类和链接
                const category = navData.categories.find(cat => cat.id === categoryId);
                if (!category) return;
                
                const link = category.links.find(link => link.id === linkId);
                if (!link) return;
                
                // 填充表单
                newLinkTitle.value = link.title;
                newLinkUrl.value = link.url;
                newLinkDesc.value = link.desc;
                newLinkIcon.value = link.icon;
                newLinkCategory.value = category.title;
                editingLinkId.value = linkId;
                editingCategoryId.value = categoryId;
                
                // 更新按钮状态
                saveLinkBtn.innerHTML = '<i class="fas fa-save"></i> 更新链接';
                cancelEditBtn.style.display = 'inline-flex';
                linkFormTitle.textContent = '编辑导航链接';
                
                // 滚动到表单位置
                document.querySelector('.admin-section').scrollIntoView({ behavior: 'smooth' });
                
                showDataStatus(`正在编辑链接"${link.title}"`, 'info');
            }
            
            // 添加新分类
            addCategoryBtn.addEventListener('click', function() {
                const title = newCategoryTitle.value.trim();
                const icon = newCategoryIcon.value.trim();
                
                if (!title) {
                    alert('请填写分类名称');
                    return;
                }
                
                // 检查分类是否已存在
                if (navData.categories.some(cat => cat.title === title)) {
                    alert('分类名称已存在，请使用其他名称');
                    return;
                }
                
                // 创建新分类
                const newCategory = {
                    id: Date.now(),
                    title,
                    icon: icon || 'fas fa-folder',
                    links: []
                };
                
                // 添加到数据
                navData.categories.push(newCategory);
                
                // 保存数据
                saveNavData();
                
                // 清空表单
                newCategoryTitle.value = '';
                newCategoryIcon.value = 'fas fa-folder';
                
                // 更新分类下拉框
                updateCategorySelect();
                
                showDataStatus(`分类"${title}"已成功添加`, 'success');
            });
            
            // 更新分类下拉框
            function updateCategorySelect() {
                const categorySelect = document.getElementById('newLinkCategory');
                categorySelect.innerHTML = '';
                
                navData.categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category.title;
                    option.textContent = category.title;
                    categorySelect.appendChild(option);
                });
            }
            
            // 渲染管理后台链接列表
            function renderAdminLists() {
                // 渲染链接列表
                linksList.innerHTML = '';
                
                navData.categories.forEach(category => {
                    category.links.forEach(link => {
                        const listItem = document.createElement('div');
                        listItem.className = 'list-item';
                        listItem.dataset.categoryId = category.id;
                        listItem.dataset.linkId = link.id;
                        
                        listItem.innerHTML = `
                            <div class="item-info">
                                <h4>${link.title} <span style="font-size: 12px; color: var(--text-secondary); font-weight: normal;">(${category.title})</span></h4>
                                <p>${link.desc}</p>
                                <p style="font-size: 12px; color: #666; margin-top: 5px;">${link.url}</p>
                            </div>
                            <div class="item-actions">
                                <button class="btn btn-warning btn-edit-link" data-link-id="${link.id}" data-category-id="${category.id}">
                                    <i class="fas fa-edit"></i> 编辑
                                </button>
                                <button class="btn btn-danger btn-delete-link" data-link-id="${link.id}" data-category-id="${category.id}">
                                    <i class="fas fa-trash"></i> 删除
                                </button>
                            </div>
                        `;
                        
                        linksList.appendChild(listItem);
                    });
                });
                
                // 添加编辑链接事件
                document.querySelectorAll('.btn-edit-link').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const linkId = parseInt(this.dataset.linkId);
                        const categoryId = parseInt(this.dataset.categoryId);
                        editLink(linkId, categoryId);
                    });
                });
                
                // 添加删除链接事件
                document.querySelectorAll('.btn-delete-link').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const linkId = parseInt(this.dataset.linkId);
                        const categoryId = parseInt(this.dataset.categoryId);
                        
                        if (confirm('确定要删除这个链接吗？此操作不可撤销。')) {
                            deleteLink(categoryId, linkId);
                        }
                    });
                });
                
                // 渲染分类列表
                categoriesList.innerHTML = '';
                
                navData.categories.forEach(category => {
                    const listItem = document.createElement('div');
                    listItem.className = 'list-item';
                    listItem.dataset.categoryId = category.id;
                    
                    listItem.innerHTML = `
                        <div class="item-info">
                            <h4>${category.title} <span style="font-size: 12px; color: var(--text-secondary); font-weight: normal;">(${category.links.length} 个链接)</span></h4>
                            <p><i class="${category.icon}"></i> ${category.icon}</p>
                        </div>
                        <div class="item-actions">
                            <button class="btn btn-danger btn-delete-category" data-category-id="${category.id}">
                                <i class="fas fa-trash"></i> 删除
                            </button>
                        </div>
                    `;
                    
                    categoriesList.appendChild(listItem);
                });
                
                // 添加删除分类事件
                document.querySelectorAll('.btn-delete-category').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const categoryId = parseInt(this.dataset.categoryId);
                        
                        // 查找分类
                        const category = navData.categories.find(cat => cat.id === categoryId);
                        
                        if (!category) return;
                        
                        if (category.links.length > 0) {
                            alert('该分类下还有链接，请先删除所有链接后再删除分类。');
                            return;
                        }
                        
                        if (confirm(`确定要删除分类"${category.title}"吗？此操作不可撤销。`)) {
                            deleteCategory(categoryId);
                        }
                    });
                });
            }
            
            // 删除链接
            function deleteLink(categoryId, linkId) {
                // 查找分类
                const category = navData.categories.find(cat => cat.id === categoryId);
                if (!category) return;
                
                // 查找链接索引
                const linkIndex = category.links.findIndex(link => link.id === linkId);
                if (linkIndex === -1) return;
                
                // 删除链接
                const deletedLink = category.links.splice(linkIndex, 1)[0];
                
                // 如果当前正在编辑这个链接，取消编辑状态
                if (parseInt(editingLinkId.value) === linkId && parseInt(editingCategoryId.value) === categoryId) {
                    cancelEdit();
                }
                
                // 保存数据
                saveNavData();
                
                showDataStatus(`链接"${deletedLink.title}"已成功删除`, 'success');
            }
            
            // 删除分类
            function deleteCategory(categoryId) {
                // 查找分类索引
                const categoryIndex = navData.categories.findIndex(cat => cat.id === categoryId);
                if (categoryIndex === -1) return;
                
                // 删除分类
                const deletedCategory = navData.categories.splice(categoryIndex, 1)[0];
                
                // 保存数据
                saveNavData();
                
                // 更新分类下拉框
                updateCategorySelect();
                
                showDataStatus(`分类"${deletedCategory.title}"已成功删除`, 'success');
            }
            
            // 保存数据按钮
            saveDataBtn.addEventListener('click', saveNavData);
            
            // 恢复默认数据
            resetDataBtn.addEventListener('click', function() {
                if (confirm('确定要恢复默认数据吗？这将清除所有自定义添加的内容。')) {
                    navData = JSON.parse(JSON.stringify(defaultNavData));
                    saveNavData();
                    showDataStatus('已恢复默认数据', 'success');
                }
            });
            
            // 导出数据
            exportDataBtn.addEventListener('click', function() {
                const dataStr = JSON.stringify(navData, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `京湖优品导航数据_${new Date().toISOString().slice(0,10)}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                showDataStatus('数据已导出为JSON文件', 'success');
            });
            
            // 事件监听
            emailCopyLink.addEventListener('click', copyEmailAddress);
            searchInput.addEventListener('input', performSearch);
            searchButton.addEventListener('click', performSearch);
            clearSearchBtn.addEventListener('click', clearSearch);
            
            // 按Enter键搜索
            searchInput.addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    performSearch();
                }
                
                // 按ESC键清空搜索
                if (event.key === 'Escape') {
                    clearSearch();
                }
            });
            
            // 初始化
            initNavigation();
            
            // 聚焦搜索框
            setTimeout(() => {
                searchInput.focus();
            }, 500);
        });
    </script>
</body>
</html>
